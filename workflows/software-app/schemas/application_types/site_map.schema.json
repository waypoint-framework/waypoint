{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.waypoint.dev/application_types/site_map.schema.json",
  "title": "Site Map Schema",
  "description": "Comprehensive site map structure for web applications, capturing page hierarchy, components, and interactive elements",
  "type": "object",
  "properties": {
    "siteInfo": {
      "type": "object",
      "description": "Basic information about the website",
      "properties": {
        "name": {"type": "string"},
        "domain": {"type": "string"},
        "description": {"type": "string"},
        "version": {"type": "string"},
        "lastUpdated": {"type": "string", "format": "date-time"},
        "primaryLanguage": {"type": "string"},
        "supportedLanguages": {"type": "array", "items": {"type": "string"}},
        "seoStrategy": {"type": "string", "description": "SEO approach and strategy"}
      },
      "required": ["name", "domain"]
    },
    "navigationStructure": {
      "type": "object",
      "description": "Primary navigation structure of the site",
      "properties": {
        "primaryNavigation": {
          "type": "array",
          "description": "Main navigation menu structure",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "string"},
              "label": {"type": "string"},
              "url": {"type": "string"},
              "type": {"enum": ["internal", "external", "anchor", "javascript"]},
              "description": {"type": "string"},
              "icon": {"type": "string", "description": "Icon identifier or class"},
              "accessLevel": {"enum": ["public", "authenticated", "admin", "premium"], "description": "Who can access this"},
              "subNavigation": {
                "type": "array",
                "description": "Nested navigation items",
                "items": {"$ref": "#/properties/navigationStructure/properties/primaryNavigation/items"}
              },
              "order": {"type": "integer", "description": "Display order"},
              "hideConditions": {"type": "array", "items": {"type": "string"}, "description": "When to hide this nav item"},
              "highlightConditions": {"type": "array", "items": {"type": "string"}, "description": "When to highlight this nav item"}
            },
            "required": ["id", "label", "url", "type"]
          }
        },
        "secondaryNavigation": {
          "type": "array",
          "description": "Secondary navigation (footer, utility nav, etc.)",
          "items": {"$ref": "#/properties/navigationStructure/properties/primaryNavigation/items"}
        },
        "breadcrumbs": {
          "type": "object",
          "description": "Breadcrumb navigation configuration",
          "properties": {
            "enabled": {"type": "boolean"},
            "strategy": {"enum": ["location_based", "path_based", "custom"], "description": "How breadcrumbs are generated"},
            "separator": {"type": "string", "description": "Separator character or element"},
            "showHome": {"type": "boolean", "description": "Whether to show home in breadcrumbs"}
          }
        },
        "mobileNavigation": {
          "type": "object",
          "description": "Mobile-specific navigation considerations",
          "properties": {
            "hamburgerMenu": {"type": "boolean"},
            "bottomNavigation": {"type": "boolean"},
            "swipeGestures": {"type": "boolean"},
            "mobileOnlyItems": {"type": "array", "items": {"type": "string"}}
          }
        }
      },
      "required": ["primaryNavigation"]
    },
    "pages": {
      "type": "array",
      "description": "All pages in the website with their details",
      "items": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "title": {"type": "string", "description": "Page title (for <title> tag)"},
          "url": {"type": "string", "description": "URL path or full URL"},
          "type": {
            "enum": ["landing", "home", "category", "detail", "form", "search", "results", "profile", "dashboard", "settings", "help", "legal", "error", "confirmation", "checkout", "login", "signup", "cms", "blog", "documentation"],
            "description": "Type of page for categorization"
          },
          "template": {"type": "string", "description": "Template or layout used"},
          "description": {"type": "string", "description": "Brief description of page purpose"},
          "keywords": {"type": "array", "items": {"type": "string"}, "description": "SEO keywords for this page"},
          "metaDescription": {"type": "string", "description": "SEO meta description"},
          "canonicalUrl": {"type": "string", "description": "Canonical URL for SEO"},
          "accessLevel": {"enum": ["public", "authenticated", "admin", "premium"], "description": "Who can access this page"},
          "redirects": {
            "type": "array",
            "description": "URLs that redirect to this page",
            "items": {
              "type": "object",
              "properties": {
                "from": {"type": "string"},
                "type": {"enum": ["301", "302", "temporary"]},
                "reason": {"type": "string"}
              }
            }
          },
          "parameters": {
            "type": "array",
            "description": "URL parameters this page accepts",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "type": {"enum": ["path", "query", "fragment"]},
                "required": {"type": "boolean"},
                "description": {"type": "string"},
                "validation": {"type": "string", "description": "Validation rules for parameter"}
              }
            }
          },
          "components": {
            "type": "array",
            "description": "Main components or sections on this page",
            "items": {
              "type": "object",
              "properties": {
                "id": {"type": "string"},
                "name": {"type": "string"},
                "type": {
                  "enum": ["header", "hero", "navigation", "content", "sidebar", "footer", "form", "list", "grid", "carousel", "modal", "dropdown", "accordion", "tabs", "breadcrumbs", "pagination", "search", "filter", "chart", "map", "video", "image_gallery", "testimonials", "cta", "newsletter", "social_media", "chat", "comments", "rating", "share", "print"],
                  "description": "Type of component"
                },
                "description": {"type": "string"},
                "position": {"type": "string", "description": "Where on page this appears"},
                "interactiveElements": {
                  "type": "array",
                  "description": "Interactive elements within this component",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {"type": "string"},
                      "type": {
                        "enum": ["button", "link", "input", "textarea", "select", "checkbox", "radio", "toggle", "slider", "date_picker", "file_upload", "search_box", "dropdown", "menu", "tab", "accordion_header", "modal_trigger", "tooltip_trigger", "copy_button", "download_link", "share_button", "like_button", "follow_button", "subscribe_button", "cart_button", "wishlist_button", "compare_button", "zoom_control", "play_button", "pause_button"],
                        "description": "Type of interactive element"
                      },
                      "label": {"type": "string", "description": "Visible text or aria-label"},
                      "action": {"type": "string", "description": "What happens when interacted with"},
                      "targetUrl": {"type": "string", "description": "URL for links"},
                      "targetPage": {"type": "string", "description": "Page ID for internal links"},
                      "validation": {"type": "string", "description": "Validation rules for inputs"},
                      "accessibility": {
                        "type": "object",
                        "properties": {
                          "ariaLabel": {"type": "string"},
                          "tabIndex": {"type": "integer"},
                          "keyboardShortcut": {"type": "string"},
                          "screenReaderText": {"type": "string"}
                        }
                      },
                      "states": {
                        "type": "array",
                        "description": "Possible states of this element",
                        "items": {"enum": ["default", "hover", "active", "focus", "disabled", "loading", "error", "success"]}
                      },
                      "conditionalDisplay": {"type": "string", "description": "When this element is shown/hidden"}
                    },
                    "required": ["id", "type", "label", "action"]
                  }
                },
                "dataElements": {
                  "type": "array",
                  "description": "Data that this component displays",
                  "items": {
                    "type": "object",
                    "properties": {
                      "field": {"type": "string"},
                      "type": {"enum": ["text", "number", "date", "image", "video", "list", "table", "chart", "map", "rating", "badge", "status", "progress"]},
                      "source": {"type": "string", "description": "Where this data comes from"},
                      "format": {"type": "string", "description": "How data is formatted for display"},
                      "defaultValue": {"type": "string", "description": "Default or placeholder value"},
                      "updateFrequency": {"enum": ["real_time", "periodic", "on_demand", "static"], "description": "How often data updates"}
                    }
                  }
                },
                "responsive": {
                  "type": "object",
                  "description": "How component behaves on different screen sizes",
                  "properties": {
                    "mobile": {"type": "string", "description": "Mobile behavior/layout"},
                    "tablet": {"type": "string", "description": "Tablet behavior/layout"},
                    "desktop": {"type": "string", "description": "Desktop behavior/layout"},
                    "hideOnMobile": {"type": "boolean"},
                    "mobileAlternative": {"type": "string", "description": "Alternative component for mobile"}
                  }
                },
                "personalization": {
                  "type": "object",
                  "description": "How component can be personalized",
                  "properties": {
                    "userCustomizable": {"type": "boolean"},
                    "variants": {"type": "array", "items": {"type": "string"}, "description": "Different variants based on user/context"},
                    "abTestable": {"type": "boolean", "description": "Whether component is part of A/B tests"}
                  }
                }
              },
              "required": ["id", "name", "type", "description", "position"]
            }
          },
          "userFlows": {
            "type": "array",
            "description": "User flows that start from or pass through this page",
            "items": {"type": "string", "description": "Reference to user flow ID"}
          },
          "analytics": {
            "type": "array",
            "description": "Analytics events tracked on this page",
            "items": {
              "type": "object",
              "properties": {
                "event": {"type": "string"},
                "trigger": {"type": "string"},
                "properties": {"type": "array", "items": {"type": "string"}}
              }
            }
          },
          "performance": {
            "type": "object",
            "description": "Performance considerations for this page",
            "properties": {
              "loadPriority": {"enum": ["critical", "high", "medium", "low"]},
              "caching": {"type": "string", "description": "Caching strategy"},
              "lazyLoading": {"type": "array", "items": {"type": "string"}, "description": "Elements that use lazy loading"},
              "preloading": {"type": "array", "items": {"type": "string"}, "description": "Resources to preload"}
            }
          },
          "seo": {
            "type": "object",
            "description": "SEO-specific configuration",
            "properties": {
              "indexable": {"type": "boolean", "description": "Whether search engines should index"},
              "structuredData": {"type": "array", "items": {"type": "string"}, "description": "Schema.org structured data types"},
              "ogTags": {"type": "object", "description": "Open Graph tags"},
              "twitterCards": {"type": "object", "description": "Twitter Card configuration"},
              "priority": {"type": "number", "minimum": 0, "maximum": 1, "description": "Sitemap priority"}
            }
          }
        },
        "required": ["id", "title", "url", "type", "description", "accessLevel", "components"]
      }
    },
    "globalComponents": {
      "type": "array",
      "description": "Components that appear across multiple pages",
      "items": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "name": {"type": "string"},
          "type": {"enum": ["header", "footer", "navigation", "sidebar", "modal", "notification", "chat", "cookie_banner", "search", "user_menu", "language_selector", "theme_toggle"]},
          "description": {"type": "string"},
          "appearsOn": {"type": "array", "items": {"type": "string"}, "description": "Page IDs where this appears"},
          "variations": {
            "type": "array",
            "description": "Different variations of this component",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "condition": {"type": "string", "description": "When this variation is used"},
                "differences": {"type": "string", "description": "How this variation differs"}
              }
            }
          }
        },
        "required": ["id", "name", "type", "description"]
      }
    },
    "userJourneys": {
      "type": "array",
      "description": "Key user journeys through the site",
      "items": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "name": {"type": "string"},
          "description": {"type": "string"},
          "startPage": {"type": "string", "description": "Page ID where journey starts"},
          "endPage": {"type": "string", "description": "Page ID where journey ends"},
          "steps": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "pageId": {"type": "string"},
                "action": {"type": "string", "description": "Main action on this page"},
                "alternatives": {"type": "array", "items": {"type": "string"}, "description": "Alternative paths from this step"}
              }
            }
          },
          "conversionGoal": {"type": "string", "description": "What conversion this journey drives"},
          "priority": {"enum": ["critical", "high", "medium", "low"]}
        },
        "required": ["id", "name", "startPage", "endPage", "steps"]
      }
    },
    "integrations": {
      "type": "array",
      "description": "External integrations and third-party services",
      "items": {
        "type": "object",
        "properties": {
          "service": {"type": "string"},
          "purpose": {"type": "string"},
          "pages": {"type": "array", "items": {"type": "string"}, "description": "Pages where this integration is used"},
          "configuration": {"type": "string", "description": "Configuration details"},
          "privacyImpact": {"type": "string", "description": "Privacy implications"}
        }
      }
    }
  },
  "required": ["siteInfo", "navigationStructure", "pages"]
}
